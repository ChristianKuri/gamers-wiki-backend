# In your docker-compose.yml

# ... (version and other services are the same)

  strapi:
    container_name: gamers-wiki-strapi
    platform: linux/arm64
    build: .
    restart: unless-stopped
    environment:
      # --- THIS IS THE FIX ---
      # Add this line to disable BuildKit and use the classic builder
      DOCKER_BUILDKIT: 0

      # --- All your other variables remain the same ---
      DATABASE_CLIENT: postgres
      DATABASE_HOST: db
      DATABASE_PORT: 5432
      DATABASE_SSL: 'false'
      HOST: '0.0.0.0'
      PORT: 1337
      NODE_ENV: production
      DATABASE_NAME: ${DATABASE_NAME}
      DATABASE_USER: ${DATABASE_USER}
      DATABASE_PASSWORD: ${DATABASE_PASSWORD}
      APP_KEYS: ${APP_KEYS}
      API_TOKEN_SALT: ${API_TOKEN_SALT}
      ADMIN_JWT_SECRET: ${ADMIN_JWT_SECRET}
      JWT_SECRET: ${JWT_SECRET}
      AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID}
      AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY}
      AWS_REGION: ${AWS_REGION}
      AWS_BUCKET_NAME: ${AWS_BUCKET_NAME}
      CDN_URL: ${CDN_URL}
    ports:
      - "1337:1337"
    depends_on:
      - db

# ... (the rest of your file is the same)